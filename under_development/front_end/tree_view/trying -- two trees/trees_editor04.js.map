{
  "version": 3,
  "file": "trees_editor04.js",
  "sourceRoot": "",
  "sources": [
    "trees_editor04.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "class InfoPanel\r\n    constructor: (node) ->\r\n        @node = node\r\n        @position = \"top\"\r\n        @button = node.querySelector(\"button\")\r\n        @palette = node.querySelector(\"div.position_palette\")\r\n        @button.addEventListener(\"click\", @show_palette)\r\n        @palette.addEventListener(\"mouseleave\", @show_button)\r\n\r\n        @triangle_up = node.querySelector(\"div.triangle_up\")\r\n        @triangle_down = node.querySelector(\"div.triangle_down\")\r\n        @triangle_left = node.querySelector(\"div.triangle_left\")\r\n        @triangle_right = node.querySelector(\"div.triangle_right\")\r\n\r\n        for triangle in [@triangle_up, @triangle_down, \r\n                         @triangle_left, @triangle_right]\r\n            triangle.addEventListener(\"click\", @change_position)\r\n\r\n    show_palette: (event) =>\r\n        @button.classList.add(\"invisible\")\r\n        @palette.classList.remove(\"invisible\")\r\n\r\n    show_button: (event) =>\r\n        @button.classList.remove(\"invisible\")\r\n        @palette.classList.add(\"invisible\")\r\n\r\n    change_parent_flex_direction: (new_value) =>\r\n        @node.parentNode.setAttribute(\"style\", \"flex-direction: #{new_value};\")\r\n\r\n    change_position: (event) =>\r\n        if event.target == @triangle_up and @position != \"top\"\r\n            @change_parent_flex_direction(\"column\")\r\n            @position = \"top\"\r\n        else if event.target == @triangle_left and @position != \"left\"\r\n            @change_parent_flex_direction(\"row\")\r\n            @position = \"left\"\r\n        else if event.target == @triangle_down and @position != \"bottom\"\r\n            @change_parent_flex_direction(\"column-reverse\")\r\n            @position = \"bottom\"\r\n        else if event.target == @triangle_right and @position != \"right\"\r\n            @change_parent_flex_direction(\"row-reverse\")\r\n            @position = \"right\"\r\n\r\n\r\nclass Separator\r\n    constructor: (node) ->\r\n        @initial_x = null\r\n        @initial_y = null\r\n        @node = node\r\n        @previous_node = @node.previousElementSibling\r\n        @next_node = @node.nextElementSibling\r\n        @node.addEventListener(\"dragstart\", @start_following)\r\n\r\n    start_following: (event) =>\r\n        @previous_node.addEventListener(\"dragover\", @follow)\r\n        @previous_node.addEventListener(\"dragend\", @stop_following)\r\n        @next_node.addEventListener(\"dragover\", @follow)\r\n        @next_node.addEventListener(\"dragend\", @stop_following)\r\n        @initial_x = event.clientX\r\n        @initial_y = event.clientY\r\n        rect = @previous_node.getBoundingClientRect()\r\n        if rect.height > rect.width\r\n            @size = Math.round(rect.width)\r\n        else\r\n            @size = Math.round(rect.height)\r\n        @previous_node.setAttribute(\"style\", \"flex-basis: #{@size}px;\")\r\n\r\n    follow: (event) =>\r\n        rect = @node.getBoundingClientRect()\r\n        prev_rect = @previous_node.getBoundingClientRect()\r\n        if rect.height > rect.width\r\n            if prev_rect.x > rect.x\r\n                delta = event.clientX - @initial_x\r\n                new_size = Math.round(@size - delta)\r\n            else\r\n                delta = event.clientX - @initial_x\r\n                new_size = Math.round(@size + delta)\r\n        else\r\n            if prev_rect.y > rect.y\r\n                delta = event.clientY - @initial_y\r\n                new_size = Math.round(@size - delta)\r\n            else\r\n                delta = event.clientY - @initial_y\r\n                new_size = Math.round(@size + delta)\r\n        style_value = \"flex-basis: #{new_size}px;\"\r\n        @previous_node.setAttribute(\"style\", style_value)\r\n\r\n    stop_following: (event) =>\r\n        @next_node.removeEventListener(\"dragover\", @follow)\r\n        @previous_node.removeEventListener(\"dragover\", @follow)\r\n        @next_node.removeEventListener(\"dragend\", @stop_following)\r\n        @previous_node.removeEventListener(\"dragend\", @stop_following)\r\n\r\n\r\nclass Tree\r\n    @instances = []\r\n    constructor: (tree_container) ->\r\n        if Tree.instances.length >= 2\r\n            throw Error(\"can't create more than 2 tree instances\")\r\n        else if Tree.instances.length == 1\r\n            @number = 1\r\n        else\r\n            @number = 0\r\n        Object.defineProperty @, \"other_instance\",\r\n            get: ->\r\n                if Tree.instances.length <= 1\r\n                    return null\r\n                else if Tree.instances.length == 2 and @number == 0\r\n                    return Tree.instances[1]\r\n                else if Tree.instances.length == 2 and @number == 1\r\n                    return Tree.instances[0]\r\n        @buttons = null\r\n        @create_buttons()\r\n        @highlighted_nodes_ids = []\r\n        @tree_container = tree_container\r\n        @background = tree_container.querySelector(\".background\")\r\n        @foreground = tree_container.querySelector(\".foreground\")\r\n        @root_object = new Storage(@foreground.dataset.root_name,\r\n                                   Number(@foreground.dataset.root_id),\r\n                                   null,\r\n                                   @)\r\n        @root_object.li = @foreground.querySelector(\"li\")\r\n        @root_object.span = @root_object.li.querySelector(\"span\")\r\n        @root_object.span.addEventListener(\"dblclick\", @root_object.open_close)\r\n        @root_object.span.addEventListener(\"click\", @process_click)\r\n        Tree.instances.push(@)\r\n        @frame_maker = new FrameMaker(@)\r\n        @tree_container.addEventListener(\"mousedown\", @tree_container_mouse)\r\n        @tree_container.addEventListener(\"mouseup\", @tree_container_mouse)\r\n        @tree_container.addEventListener(\"mousemove\", @tree_container_mouse)\r\n        @there_was_mousedown = false\r\n\r\n    create_buttons: () =>\r\n        @buttons = {\r\n            \"add_storage\": null\r\n            \"add_chemical\": null\r\n            \"view_chemical\": null\r\n            \"edit\": null\r\n            \"cut\": null\r\n            \"paste\": null\r\n            \"move\": null\r\n            \"delete_storage\": null\r\n            \"move_to_the_left\": null\r\n            \"move_to_the_right\": null\r\n            \"close\": null\r\n        }\r\n\r\n    tree_container_mouse: (event) =>\r\n        if event.target.nodeName != \"SPAN\"\r\n            if event.type == \"mousedown\"\r\n                @there_was_mousedown = true\r\n            else if event.type == \"mousemove\"\r\n                @there_was_mousedown = false\r\n            else if event.type == \"mouseup\" and @there_was_mousedown\r\n                for id_of_node in @highlighted_nodes_ids\r\n                    node = @foreground.querySelector(\r\n                        \"span[data-storage_node_id='#{id_of_node}']\"\r\n                    )\r\n                    node.classList.remove(\"highlighted\")\r\n                @highlighted_nodes_ids = []\r\n                @there_was_mousedown = false\r\n\r\n    highlight: (node_id) =>\r\n        if @highlighted_nodes_ids.indexOf(node_id) == -1\r\n            @highlighted_nodes_ids.push(node_id)\r\n            node = @foreground.querySelector(\r\n                \"span[data-storage_node_id='#{node_id}']\"\r\n            )\r\n            node.classList.add(\"highlighted\")\r\n\r\n    unhighlight: (node_id) =>\r\n        if @highlighted_nodes_ids.indexOf(node_id) != -1\r\n            index_in_array = @highlighted_nodes_ids.indexOf(node_id)\r\n            @highlighted_nodes_ids.splice(index_in_array, 1)\r\n            node = @foreground.querySelector(\r\n                \"span[data-storage_node_id='#{node_id}']\"\r\n            )\r\n            node.classList.remove(\"highlighted\")\r\n\r\n    highlight_only_this: (node_id) =>\r\n        for id_of_node in @highlighted_nodes_ids\r\n            node = @foreground.querySelector(\r\n                \"span[data-storage_node_id='#{id_of_node}']\"\r\n            )\r\n            node.classList.remove(\"highlighted\")\r\n        @highlighted_nodes_ids = []\r\n        @highlight(node_id)\r\n\r\n    process_click: (event) =>\r\n        if event.target.classList.contains(\"highlighted\")\r\n            if event.shiftKey or event.ctrlKey\r\n                @highlighted_shift_or_ctrl(event)\r\n            else\r\n                @highlighted_no_key(event)\r\n        else\r\n            if event.shiftKey\r\n                @unhighlighted_shift(event)\r\n            else if event.ctrlKey\r\n                @unhighlighted_ctrl(event)\r\n            else\r\n                @unhighlighted_no_key(event)\r\n\r\n    highlighted_shift_or_ctrl: (event) =>\r\n        @unhighlight(event.target.dataset.storage_node_id)\r\n\r\n    highlighted_no_key: (event) =>\r\n        if @highlighted_nodes_ids.length == 1\r\n            @unhighlight(event.target.dataset.storage_node_id)\r\n        else if @highlighted_nodes_ids.length > 1\r\n            @highlight_only_this(event.target.dataset.storage_node_id)\r\n\r\n    unhighlighted_shift: (event) =>\r\n        the_ul = @foreground.querySelector(\"ul\")\r\n        levels = [[the_ul]]\r\n        while levels[levels.length - 1].length != 0\r\n            levels = @process_levels(levels)\r\n        uls_spans_level = null\r\n        for level in levels\r\n            if level.indexOf(event.target) != -1\r\n                uls_spans_level = level\r\n                break\r\n        spans_level_list = []\r\n        for node in uls_spans_level\r\n            if node.tagName == \"SPAN\"\r\n                spans_level_list.push(node)\r\n        @process_span_list(spans_level_list, event.target)\r\n\r\n    process_levels: (levels) ->\r\n        last_level = levels[levels.length - 1]\r\n        new_level = []\r\n        for item in last_level\r\n            children_arr = Array.from(item.children)\r\n            Array.prototype.push.apply(new_level, children_arr)\r\n        levels.push(new_level)\r\n        return levels\r\n\r\n    process_span_list: (span_list, event_target) =>\r\n        will_continue = false\r\n        for node in span_list\r\n            if node.classList.contains(\"highlighted\")\r\n                will_continue = true\r\n                break\r\n        if not will_continue\r\n            return null\r\n        @highlight_domain(span_list, event_target)\r\n\r\n    highlight_domain: (span_list, event_target) =>\r\n        domain_of_numbers = []\r\n        target_number = span_list.indexOf(event_target)\r\n        for number in [target_number..0]\r\n            if span_list[number].classList.contains(\"highlighted\")\r\n                break\r\n            else\r\n                domain_of_numbers.push(number)\r\n                continue\r\n        if target_number < span_list.length - 1\r\n            for number in [target_number + 1..span_list.length - 1]\r\n                if span_list[number].classList.contains(\"highlighted\")\r\n                    break\r\n                else\r\n                    domain_of_numbers.push(number)\r\n                    continue\r\n        for number in domain_of_numbers\r\n            @highlight(span_list[number].dataset.storage_node_id)\r\n\r\n\r\n    unhighlighted_ctrl: (event) =>\r\n        @highlight(event.target.dataset.storage_node_id)\r\n\r\n    unhighlighted_no_key: (event) =>\r\n        @highlight_only_this(event.target.dataset.storage_node_id)\r\n\r\n\r\nclass Chemical\r\n    @chemicals_and_storages = {}\r\n    constructor: (name, id, parent, tree) ->\r\n        @name = name\r\n        @id = id\r\n        @parent = parent\r\n        @tree = tree\r\n        @li = null\r\n        @span = null\r\n        Chemical.chemicals_and_storages[id] = @\r\n\r\n\r\nclass Storage extends Chemical\r\n    constructor: (name, id, parent, tree) ->\r\n        super(name, id, parent, tree)\r\n        @children = []\r\n        @level = null\r\n        @is_terminal = false\r\n        @is_open = false\r\n\r\n    open_close: (event) =>\r\n        @tree.unhighlight(event.target.dataset.storage_node_id)\r\n        if @is_open and event.target == @span\r\n            ul = @li.querySelector(\"ul\")\r\n            ul.remove()\r\n            @children = []\r\n            @is_open = false\r\n            @li.classList.remove(\"open\")\r\n            @li.classList.add(\"closed\")\r\n        else\r\n            if event.target == @span\r\n                children = Receiver.call(@id)\r\n                @create_children_from_list(children)\r\n                if JSON.stringify(children) != \"{}\"\r\n                    @is_open = true\r\n                    @li.classList.remove(\"closed\")\r\n                    @li.classList.add(\"open\")\r\n        @tree.frame_maker.destructor()\r\n        @tree.frame_maker = new FrameMaker(@tree)\r\n\r\n    create_children_from_list: (children) ->\r\n        ul = document.createElement(\"ul\")\r\n        @li.append(ul)\r\n        for id of children\r\n            name = children[id]\r\n            if isNaN(id)\r\n                child = new Chemical(name, id, @, @tree)\r\n            else\r\n                child = new Storage(name, Number(id), @, @tree)\r\n            @children.push(child)\r\n            li = document.createElement(\"li\")\r\n            span = document.createElement(\"span\")\r\n            span.textContent = name\r\n            span.setAttribute(\"data-storage_node_id\", id)\r\n            li.append(span)\r\n            ul.append(li)\r\n            child.li = li\r\n            child.span = span\r\n            if child instanceof Storage\r\n                span.addEventListener(\"dblclick\", child.open_close)\r\n                span.addEventListener(\"click\", @tree.process_click)\r\n                li.classList.add(\"closed\")\r\n            else\r\n                span.addEventListener(\"click\", @tree.process_click)\r\n                li.classList.add(\"chemical\")\r\n\r\nclass Button\r\n    # Abstract key class\r\n    @name = \"\"\r\n    @title = \"\"\r\n    constructor: (tree) ->\r\n        @tree = tree\r\n        @active = true\r\n        if @ instanceof Button\r\n            throw Error(\"Can't instantiate abstract class\")\r\n        if Object.hasOwn(@tree.buttons, @name) and\r\n           @tree.buttons[@name] is null\r\n            @tree.buttons = @\r\n        else\r\n            throw Error(\"One such button already created\")\r\n        container_container = @tree.tree_container.parentNode\r\n        selector = \"button[title='#{@title}']\"\r\n        @html_button = container_container.querySelector(selector)\r\n        if @html_button.hasAttribute(\"disabled\")\r\n            @active = false\r\n        @html_button.addEventListener(\"click\", @press_the_button)\r\n\r\n    press_the_button: () =>\r\n        null\r\n        # Not implemented\r\n\r\n    update_activity_status: () =>\r\n        null\r\n        # Not implemented\r\n\r\n    check_if_need_activation: () =>\r\n        null\r\n        # Not implemented\r\n\r\n    activate: () =>\r\n        @html_button.setAttribute(\"disabled\", \"disabled\")\r\n\r\n    deactivate: () =>\r\n        @html_button.removeAttribute(\"disabled\")\r\n\r\nclass Receiver\r\n    @content = {\r\n        1: {name: \"One\", parent: 0}\r\n        2: {name: \"Two\", parent: 0}\r\n        3: {name: \"Three\", parent: 0}\r\n        4: {name: \"Four\", parent: 2}\r\n        \"chem5\": {name: \"Five\", parent: 4}\r\n    }\r\n\r\n    @call: (parent_id) ->\r\n        result = {}\r\n        for key of @content\r\n            if @content[key].parent == parent_id\r\n                result[key] = @content[key].name\r\n        return result\r\n\r\n    @record_creation: () ->\r\n        null\r\n    \r\nclass FrameMaker\r\n    constructor: (tree) ->\r\n        @tree = tree\r\n        @anchor = {x: 0, y: 0}\r\n        @background = tree.background\r\n        @foreground = tree.foreground\r\n        @foreground.addEventListener(\"mousedown\", @send_event)\r\n        @foreground.addEventListener(\"mouseup\", @send_event)\r\n        @foreground.addEventListener(\"mousemove\", @send_event)\r\n        @foreground.addEventListener(\"mouseleave\", @send_event)\r\n        @back_coords = @background.getBoundingClientRect()\r\n        @background.addEventListener(\"mousedown\", @mousedown_processor)\r\n        @inner_frame = null\r\n        @li_list = @make_li_list()\r\n\r\n    destructor: () =>\r\n        @foreground.removeEventListener(\"mousedown\", @send_event)\r\n        @foreground.removeEventListener(\"mouseup\", @send_event)\r\n        @foreground.removeEventListener(\"mousemove\", @send_event)\r\n        @foreground.removeEventListener(\"mouseleave\", @send_event)\r\n        @background.removeEventListener(\"mousedown\", @mousedown_processor)\r\n        @anchor = null\r\n        @background = null\r\n        @foreground = null\r\n        @back_coords = null\r\n        @inner_frame = null\r\n        @li_list = null\r\n\r\n    make_li_list: () =>\r\n        span_list = []\r\n        all_spans = @foreground.querySelectorAll(\"span\")\r\n        for element in all_spans\r\n            list_point = new ListPoint(element, @tree)\r\n            span_list.push(list_point)\r\n        return span_list\r\n\r\n    send_event: (event) =>\r\n        new_event = new MouseEvent(event.type, {\r\n            bubbles: false\r\n            cancelable: false\r\n            clientX: event.clientX\r\n            clientY: event.clientY\r\n        })\r\n        @background.dispatchEvent(new_event)\r\n\r\n    mousedown_processor: (event) =>\r\n        @anchor.x = event.clientX - @back_coords.left\r\n        @anchor.y = event.clientY - @back_coords.top\r\n        if @inner_frame\r\n            @inner_frame.remove()\r\n        @inner_frame = document.createElement(\"div\")\r\n        @background.prepend(@inner_frame)\r\n        style_value = (\"margin-top: #{@anchor.y}px; margin-left: \" +\r\n            \"#{@anchor.x}px; width: #{0}px; height: #{0}px;\")\r\n        @inner_frame.setAttribute(\"style\", style_value)\r\n        @inner_frame.classList.add(\"figure\")\r\n        @background.addEventListener(\"mousemove\", @mousemove_processor)\r\n        @background.addEventListener(\"mouseup\", @mouseup_leave_processor)\r\n        @background.addEventListener(\"mouseleave\", @mouseup_leave_processor)\r\n\r\n    mousemove_processor: (event) =>\r\n        x = event.clientX - @back_coords.left\r\n        y = event.clientY - @back_coords.top\r\n        margin_left = Math.min(x, @anchor.x)\r\n        margin_top = Math.min(y, @anchor.y)\r\n        width = Math.max(x, @anchor.x) - margin_left\r\n        height = Math.max(y, @anchor.y) - margin_top\r\n        style_value = (\"margin-top: #{margin_top}px; margin-left: \" +\r\n            \"#{margin_left}px; \" +\r\n            \"width: #{width}px; height: #{height}px;\")\r\n        @inner_frame.setAttribute(\"style\", style_value)\r\n        @check_for_intersections(margin_left,\r\n            margin_top,\r\n            margin_left + width,\r\n            margin_top + height)\r\n\r\n    check_for_intersections: (left, top, right, bottom) =>\r\n        for list_point in @li_list\r\n            list_point.check(left, top, right, bottom, @back_coords)\r\n\r\n    mouseup_leave_processor: (event) =>\r\n        @inner_frame.remove()\r\n        @inner_frame = null\r\n        @background.removeEventListener(\"mousemove\", @mousemove_processor)\r\n        @background.removeEventListener(\"mouseup\", @mouseup_leave_processor)\r\n        @background.removeEventListener(\"mouseleave\", @mouseup_leave_processor)\r\n\r\n\r\nclass ListPoint\r\n    constructor: (node, tree) ->\r\n        @node = node\r\n        @tree = tree\r\n        @rectangle = node.getBoundingClientRect()\r\n        @highlighted = false\r\n\r\n    check: (left, top, right, bottom, back_coords) =>\r\n        if (top < @rectangle.top - back_coords.top < bottom or\r\n            top < @rectangle.bottom - back_coords.top < bottom) and\r\n            (left < @rectangle.left - back_coords.left < right or\r\n                left < @rectangle.right - back_coords.left < right)\r\n            if @highlighted == false\r\n                @node.classList.add(\"highlighted\")\r\n                @highlighted = true\r\n                storage_node_id = @node.dataset.storage_node_id\r\n                @tree.highlight(storage_node_id)\r\n        else\r\n            if @highlighted == true\r\n                @node.classList.remove(\"highlighted\")\r\n                @highlighted = false\r\n                storage_node_id = @node.dataset.storage_node_id\r\n                @tree.unhighlight(storage_node_id)\r\n\r\nclass PageManager\r\n    constructor: () ->\r\n        @info = document.querySelector(\"div.info\")\r\n        @info_panel = new InfoPanel(@info)\r\n        @separators = []\r\n        for separator in document.querySelectorAll(\"div.separator\")\r\n            new_separator = new Separator(separator)\r\n            @separators.push(new_separator)\r\n        @tree_container = document.querySelector(\"div.tree_container\")\r\n        @tree = []\r\n        @tree.push(new Tree(@tree_container))\r\n\r\npage_manager = new PageManager()\r\n"
  ]
}