{
  "version": 3,
  "file": "trees_editor03.js",
  "sourceRoot": "",
  "sources": [
    "trees_editor03.coffee"
  ],
  "names": [],
  "mappings": ";AAAA;AAAA,MAAA,SAAA,EAAA,SAAA,EAAA,OAAA,EAAA;;EAAM,YAAN,MAAA,UAAA;IACI,WAAa,CAAC,IAAD,CAAA;AACjB,UAAA,CAAA,EAAA,GAAA,EAAA,GAAA,EAAA;UAgBI,CAAA,mBAAA,CAAA;UAIA,CAAA,kBAAA,CAAA;UAIA,CAAA,mCAAA,CAAA;UAGA,CAAA,sBAAA,CAAA;MA3BI,IAAC,CAAA,IAAD,GAAQ;MACR,IAAC,CAAA,QAAD,GAAY;MACZ,IAAC,CAAA,MAAD,GAAU,IAAI,CAAC,aAAL,CAAmB,QAAnB;MACV,IAAC,CAAA,OAAD,GAAW,IAAI,CAAC,aAAL,CAAmB,sBAAnB;MACX,IAAC,CAAA,MAAM,CAAC,gBAAR,CAAyB,OAAzB,EAAkC,IAAC,CAAA,YAAnC;MACA,IAAC,CAAA,OAAO,CAAC,gBAAT,CAA0B,YAA1B,EAAwC,IAAC,CAAA,WAAzC;MAEA,IAAC,CAAA,WAAD,GAAe,IAAI,CAAC,aAAL,CAAmB,iBAAnB;MACf,IAAC,CAAA,aAAD,GAAiB,IAAI,CAAC,aAAL,CAAmB,mBAAnB;MACjB,IAAC,CAAA,aAAD,GAAiB,IAAI,CAAC,aAAL,CAAmB,mBAAnB;MACjB,IAAC,CAAA,cAAD,GAAkB,IAAI,CAAC,aAAL,CAAmB,oBAAnB;AAElB;MAAA,KAAA,qCAAA;;QAEI,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAmC,IAAC,CAAA,eAApC;MAFJ;IAbS;;IAiBb,YAAc,CAAC,KAAD,CAAA;MACV,IAAC,CAAA,MAAM,CAAC,SAAS,CAAC,GAAlB,CAAsB,WAAtB;aACA,IAAC,CAAA,OAAO,CAAC,SAAS,CAAC,MAAnB,CAA0B,WAA1B;IAFU;;IAId,WAAa,CAAC,KAAD,CAAA;MACT,IAAC,CAAA,MAAM,CAAC,SAAS,CAAC,MAAlB,CAAyB,WAAzB;aACA,IAAC,CAAA,OAAO,CAAC,SAAS,CAAC,GAAnB,CAAuB,WAAvB;IAFS;;IAIb,4BAA8B,CAAC,SAAD,CAAA;aAC1B,IAAC,CAAA,IAAI,CAAC,UAAU,CAAC,YAAjB,CAA8B,OAA9B,EAAuC,CAAA,gBAAA,CAAA,CAAmB,SAAnB,EAAA,CAAvC;IAD0B;;IAG9B,eAAiB,CAAC,KAAD,CAAA;MACb,IAAG,KAAK,CAAC,MAAN,KAAgB,IAAC,CAAA,WAAjB,IAAiC,IAAC,CAAA,QAAD,KAAa,KAAjD;QACI,IAAC,CAAA,4BAAD,CAA8B,QAA9B;eACA,IAAC,CAAA,QAAD,GAAY,MAFhB;OAAA,MAGK,IAAG,KAAK,CAAC,MAAN,KAAgB,IAAC,CAAA,aAAjB,IAAmC,IAAC,CAAA,QAAD,KAAa,MAAnD;QACD,IAAC,CAAA,4BAAD,CAA8B,KAA9B;eACA,IAAC,CAAA,QAAD,GAAY,OAFX;OAAA,MAGA,IAAG,KAAK,CAAC,MAAN,KAAgB,IAAC,CAAA,aAAjB,IAAmC,IAAC,CAAA,QAAD,KAAa,QAAnD;QACD,IAAC,CAAA,4BAAD,CAA8B,gBAA9B;eACA,IAAC,CAAA,QAAD,GAAY,SAFX;OAAA,MAGA,IAAG,KAAK,CAAC,MAAN,KAAgB,IAAC,CAAA,cAAjB,IAAoC,IAAC,CAAA,QAAD,KAAa,OAApD;QACD,IAAC,CAAA,4BAAD,CAA8B,aAA9B;eACA,IAAC,CAAA,QAAD,GAAY,QAFX;;IAVQ;;EA7BrB;;EA4CM,YAAN,MAAA,UAAA;IACI,WAAa,CAAC,IAAD,CAAA;UAQb,CAAA,sBAAA,CAAA;UAcA,CAAA,aAAA,CAAA;UAoBA,CAAA,qBAAA,CAAA;MAzCI,IAAC,CAAA,SAAD,GAAa;MACb,IAAC,CAAA,SAAD,GAAa;MACb,IAAC,CAAA,IAAD,GAAQ;MACR,IAAC,CAAA,aAAD,GAAiB,IAAC,CAAA,IAAI,CAAC;MACvB,IAAC,CAAA,SAAD,GAAa,IAAC,CAAA,IAAI,CAAC;MACnB,IAAC,CAAA,IAAI,CAAC,gBAAN,CAAuB,WAAvB,EAAoC,IAAC,CAAA,eAArC;IANS;;IAQb,eAAiB,CAAC,KAAD,CAAA;AACrB,UAAA;MAAQ,IAAC,CAAA,aAAa,CAAC,gBAAf,CAAgC,UAAhC,EAA4C,IAAC,CAAA,MAA7C;MACA,IAAC,CAAA,aAAa,CAAC,gBAAf,CAAgC,SAAhC,EAA2C,IAAC,CAAA,cAA5C;MACA,IAAC,CAAA,SAAS,CAAC,gBAAX,CAA4B,UAA5B,EAAwC,IAAC,CAAA,MAAzC;MACA,IAAC,CAAA,SAAS,CAAC,gBAAX,CAA4B,SAA5B,EAAuC,IAAC,CAAA,cAAxC;MACA,IAAC,CAAA,SAAD,GAAa,KAAK,CAAC;MACnB,IAAC,CAAA,SAAD,GAAa,KAAK,CAAC;MACnB,IAAA,GAAO,IAAC,CAAA,aAAa,CAAC,qBAAf,CAAA;MACP,IAAG,IAAI,CAAC,MAAL,GAAc,IAAI,CAAC,KAAtB;QACI,IAAC,CAAA,IAAD,GAAQ,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,KAAhB,EADZ;OAAA,MAAA;QAGI,IAAC,CAAA,IAAD,GAAQ,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAhB,EAHZ;;aAIA,IAAC,CAAA,aAAa,CAAC,YAAf,CAA4B,OAA5B,EAAqC,CAAA,YAAA,CAAA,CAAe,IAAC,CAAA,IAAhB,CAAA,GAAA,CAArC;IAZa;;IAcjB,MAAQ,CAAC,KAAD,CAAA;AACZ,UAAA,KAAA,EAAA,QAAA,EAAA,SAAA,EAAA,IAAA,EAAA;MAAQ,IAAA,GAAO,IAAC,CAAA,IAAI,CAAC,qBAAN,CAAA;MACP,SAAA,GAAY,IAAC,CAAA,aAAa,CAAC,qBAAf,CAAA;MACZ,IAAG,IAAI,CAAC,MAAL,GAAc,IAAI,CAAC,KAAtB;QACI,IAAG,SAAS,CAAC,CAAV,GAAc,IAAI,CAAC,CAAtB;UACI,KAAA,GAAQ,KAAK,CAAC,OAAN,GAAgB,IAAC,CAAA;UACzB,QAAA,GAAW,IAAI,CAAC,KAAL,CAAW,IAAC,CAAA,IAAD,GAAQ,KAAnB,EAFf;SAAA,MAAA;UAII,KAAA,GAAQ,KAAK,CAAC,OAAN,GAAgB,IAAC,CAAA;UACzB,QAAA,GAAW,IAAI,CAAC,KAAL,CAAW,IAAC,CAAA,IAAD,GAAQ,KAAnB,EALf;SADJ;OAAA,MAAA;QAQI,IAAG,SAAS,CAAC,CAAV,GAAc,IAAI,CAAC,CAAtB;UACI,KAAA,GAAQ,KAAK,CAAC,OAAN,GAAgB,IAAC,CAAA;UACzB,QAAA,GAAW,IAAI,CAAC,KAAL,CAAW,IAAC,CAAA,IAAD,GAAQ,KAAnB,EAFf;SAAA,MAAA;UAII,KAAA,GAAQ,KAAK,CAAC,OAAN,GAAgB,IAAC,CAAA;UACzB,QAAA,GAAW,IAAI,CAAC,KAAL,CAAW,IAAC,CAAA,IAAD,GAAQ,KAAnB,EALf;SARJ;;MAcA,WAAA,GAAc,CAAA,YAAA,CAAA,CAAe,QAAf,CAAA,GAAA;aACd,IAAC,CAAA,aAAa,CAAC,YAAf,CAA4B,OAA5B,EAAqC,WAArC;IAlBI;;IAoBR,cAAgB,CAAC,KAAD,CAAA;MACZ,IAAC,CAAA,SAAS,CAAC,mBAAX,CAA+B,UAA/B,EAA2C,IAAC,CAAA,MAA5C;MACA,IAAC,CAAA,aAAa,CAAC,mBAAf,CAAmC,UAAnC,EAA+C,IAAC,CAAA,MAAhD;MACA,IAAC,CAAA,SAAS,CAAC,mBAAX,CAA+B,SAA/B,EAA0C,IAAC,CAAA,cAA3C;aACA,IAAC,CAAA,aAAa,CAAC,mBAAf,CAAmC,SAAnC,EAA8C,IAAC,CAAA,cAA/C;IAJY;;EA3CpB;;EAkDM,UAAN,MAAA,QAAA;IACI,WAAa,CAAA,CAAA;AACjB,UAAA,CAAA,EAAA,GAAA,EAAA,aAAA,EAAA,GAAA,EAAA;MAAQ,IAAC,CAAA,IAAD,GAAQ,QAAQ,CAAC,aAAT,CAAuB,UAAvB;MACR,IAAC,CAAA,UAAD,GAAc,IAAI,SAAJ,CAAc,IAAC,CAAA,IAAf;MACd,IAAC,CAAA,UAAD,GAAc;AACd;MAAA,KAAA,qCAAA;;QACI,aAAA,GAAgB,IAAI,SAAJ,CAAc,SAAd;QAChB,IAAC,CAAA,UAAU,CAAC,IAAZ,CAAiB,aAAjB;MAFJ;IAJS;;EADjB;;EASA,OAAA,GAAU,IAAI,OAAJ,CAAA;AAvGV",
  "sourcesContent": [
    "class InfoPanel\r\n    constructor: (node) ->\r\n        @node = node\r\n        @position = \"top\"\r\n        @button = node.querySelector(\"button\")\r\n        @palette = node.querySelector(\"div.position_palette\")\r\n        @button.addEventListener(\"click\", @show_palette)\r\n        @palette.addEventListener(\"mouseleave\", @show_button)\r\n\r\n        @triangle_up = node.querySelector(\"div.triangle_up\")\r\n        @triangle_down = node.querySelector(\"div.triangle_down\")\r\n        @triangle_left = node.querySelector(\"div.triangle_left\")\r\n        @triangle_right = node.querySelector(\"div.triangle_right\")\r\n\r\n        for triangle in [@triangle_up, @triangle_down, \r\n                         @triangle_left, @triangle_right]\r\n            triangle.addEventListener(\"click\", @change_position)\r\n\r\n    show_palette: (event) =>\r\n        @button.classList.add(\"invisible\")\r\n        @palette.classList.remove(\"invisible\")\r\n\r\n    show_button: (event) =>\r\n        @button.classList.remove(\"invisible\")\r\n        @palette.classList.add(\"invisible\")\r\n\r\n    change_parent_flex_direction: (new_value) =>\r\n        @node.parentNode.setAttribute(\"style\", \"flex-direction: #{new_value};\")\r\n\r\n    change_position: (event) =>\r\n        if event.target == @triangle_up and @position != \"top\"\r\n            @change_parent_flex_direction(\"column\")\r\n            @position = \"top\"\r\n        else if event.target == @triangle_left and @position != \"left\"\r\n            @change_parent_flex_direction(\"row\")\r\n            @position = \"left\"\r\n        else if event.target == @triangle_down and @position != \"bottom\"\r\n            @change_parent_flex_direction(\"column-reverse\")\r\n            @position = \"bottom\"\r\n        else if event.target == @triangle_right and @position != \"right\"\r\n            @change_parent_flex_direction(\"row-reverse\")\r\n            @position = \"right\"\r\n\r\n\r\nclass Separator\r\n    constructor: (node) ->\r\n        @initial_x = null\r\n        @initial_y = null\r\n        @node = node\r\n        @previous_node = @node.previousElementSibling\r\n        @next_node = @node.nextElementSibling\r\n        @node.addEventListener(\"dragstart\", @start_following)\r\n\r\n    start_following: (event) =>\r\n        @previous_node.addEventListener(\"dragover\", @follow)\r\n        @previous_node.addEventListener(\"dragend\", @stop_following)\r\n        @next_node.addEventListener(\"dragover\", @follow)\r\n        @next_node.addEventListener(\"dragend\", @stop_following)\r\n        @initial_x = event.clientX\r\n        @initial_y = event.clientY\r\n        rect = @previous_node.getBoundingClientRect()\r\n        if rect.height > rect.width\r\n            @size = Math.round(rect.width)\r\n        else\r\n            @size = Math.round(rect.height)\r\n        @previous_node.setAttribute(\"style\", \"flex-basis: #{@size}px;\")\r\n\r\n    follow: (event) =>\r\n        rect = @node.getBoundingClientRect()\r\n        prev_rect = @previous_node.getBoundingClientRect()\r\n        if rect.height > rect.width\r\n            if prev_rect.x > rect.x\r\n                delta = event.clientX - @initial_x\r\n                new_size = Math.round(@size - delta)\r\n            else\r\n                delta = event.clientX - @initial_x\r\n                new_size = Math.round(@size + delta)\r\n        else\r\n            if prev_rect.y > rect.y\r\n                delta = event.clientY - @initial_y\r\n                new_size = Math.round(@size - delta)\r\n            else\r\n                delta = event.clientY - @initial_y\r\n                new_size = Math.round(@size + delta)\r\n        style_value = \"flex-basis: #{new_size}px;\"\r\n        @previous_node.setAttribute(\"style\", style_value)\r\n\r\n    stop_following: (event) =>\r\n        @next_node.removeEventListener(\"dragover\", @follow)\r\n        @previous_node.removeEventListener(\"dragover\", @follow)\r\n        @next_node.removeEventListener(\"dragend\", @stop_following)\r\n        @previous_node.removeEventListener(\"dragend\", @stop_following)\r\n\r\n\r\nclass Starter\r\n    constructor: () ->\r\n        @info = document.querySelector(\"div.info\")\r\n        @info_panel = new InfoPanel(@info)\r\n        @separators = []\r\n        for separator in document.querySelectorAll(\"div.separator\")\r\n            new_separator = new Separator(separator)\r\n            @separators.push(new_separator)\r\n\r\nstarter = new Starter()"
  ]
}